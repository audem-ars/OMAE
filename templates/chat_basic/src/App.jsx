import React,{useState,useEffect,useRef} from 'react'
export default function App(){const[ms,setMs]=useState([]);const[t,setT]=useState('');const r=useRef();useEffect(()=>{const u=localStorage.getItem('CHAT_WS_URL')||'';if(!u)return;const ws=new WebSocket(u);r.current=ws;ws.onmessage=e=>setMs(m=>[...m,{you:false,text:e.data}]);return()=>ws.close()},[]);const send=()=>{if(!t)return;setMs(m=>[...m,{you:true,text:t}]);try{r.current?.send(t)}catch{};setT('')};return(<div><h1>{{TITLE}}</h1><div>{ms.map((m,i)=>(<div key={i}>{m.text}</div>))}</div><input value={t} onChange={e=>setT(e.target.value)}/><button onClick={send}>Send</button></div>)}
